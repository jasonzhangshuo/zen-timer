# 禅修冥想计时器 - 微信小程序

## 📱 项目说明

这是一个使用 `web-view` 组件的微信小程序，直接加载 H5 应用。

- **H5 地址**: https://zen.jason2026.top
- **技术方案**: 小程序壳 + web-view 内嵌 H5
- **优势**: 零改造、100% 还原、快速上线

---

## 🚀 快速开始

### 1. 注册微信小程序

访问：https://mp.weixin.qq.com/

选择类型：
- 个人：免费，功能受限
- 企业：需营业执照，功能完整

### 2. 修改配置

编辑 `project.config.json`，填入你的 AppID：
```json
{
  "appid": "你的小程序AppID"
}
```

### 3. 配置业务域名

**重要：必须先完成此步骤！**

1. 登录小程序后台
2. 进入"开发 → 开发管理 → 开发设置 → 业务域名"
3. 点击"添加"
4. 输入：`zen.jason2026.top`
5. 下载校验文件（例如：`WxVerifyFile.txt`）
6. 上传校验文件到服务器根目录：
```bash
scp WxVerifyFile.txt ubuntu@62.234.130.117:/home/ubuntu/zen-timer/
```
7. 点击"验证"

### 4. 使用微信开发者工具

1. 下载：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
2. 打开微信开发者工具
3. 选择"导入项目"
4. 项目目录：选择 `miniprogram` 文件夹
5. AppID：填入你的小程序 AppID
6. 点击"导入"

### 5. 开发调试

在开发者工具中：
1. 点击"编译"
2. 如果提示"不在业务域名列表中"，点击右上角"详情"
3. 勾选"不校验合法域名"（仅开发时）
4. 重新编译

### 6. 真机预览

1. 点击工具栏"预览"
2. 扫描二维码
3. 在手机上测试

### 7. 上传发布

1. 点击工具栏"上传"
2. 填写版本号和备注
3. 登录小程序后台
4. 进入"管理 → 版本管理"
5. 提交审核
6. 审核通过后发布

---

## 📋 业务域名配置详细步骤

### 方式 A：通过小程序后台配置

1. 登录 https://mp.weixin.qq.com/
2. 开发 → 开发管理 → 开发设置
3. 找到"业务域名"
4. 点击"添加"
5. 输入：`zen.jason2026.top`
6. 下载校验文件
7. 上传到服务器：
```bash
# 假设校验文件名为 WxVerifyFile.txt
scp WxVerifyFile.txt ubuntu@62.234.130.117:/home/ubuntu/zen-timer/
```
8. 确保可以访问：`https://zen.jason2026.top/WxVerifyFile.txt`
9. 点击"验证"

### 方式 B：使用腾讯云控制台（如果小程序在腾讯云注册）

1. 登录腾讯云控制台
2. 进入"微信小程序"
3. 选择你的小程序
4. 配置业务域名

---

## ⚠️ 常见问题

### 问题 1：web-view 白屏

**原因：**
- 业务域名未配置
- HTTPS 证书问题
- H5 页面加载失败

**解决：**
1. 检查业务域名是否配置成功
2. 访问 https://zen.jason2026.top 确认可访问
3. 查看开发者工具控制台错误信息

### 问题 2：提示"不在业务域名列表中"

**解决：**
1. 确认已在小程序后台配置业务域名
2. 确认校验文件已上传且可访问
3. 等待配置生效（约 5 分钟）

### 问题 3：真机无法访问，开发者工具正常

**原因：**
开发者工具勾选了"不校验合法域名"

**解决：**
1. 取消"不校验合法域名"
2. 确保业务域名配置正确
3. 重新编译

### 问题 4：音频无法自动播放

**原因：**
小程序限制，音频需要用户手动触发

**解决：**
H5 页面已处理，用户点击播放按钮即可

---

## 🎨 自定义配置

### 修改导航栏颜色

编辑 `app.json`：
```json
{
  "window": {
    "navigationBarBackgroundColor": "#你的颜色",
    "navigationBarTextStyle": "white"
  }
}
```

### 修改分享文案

编辑 `pages/webview/webview.js`：
```javascript
onShareAppMessage() {
  return {
    title: '你的分享标题',
    path: '/pages/webview/webview',
    imageUrl: '分享图片URL'
  }
}
```

---

## 📊 小程序审核注意事项

### 必填信息

1. **服务类目**：选择"工具 → 计时器"
2. **标签**：冥想、计时、禅修
3. **简介**：简洁描述应用功能

### 审核要点

1. ✅ 功能完整可用
2. ✅ 无诱导分享内容
3. ✅ 无广告弹窗
4. ✅ 隐私政策完整
5. ✅ 用户协议完整

### 审核时间

- 首次审核：1-7 天
- 后续更新：1-3 天

---

## 📞 技术支持

如有问题：
1. 查看微信开发者工具控制台
2. 检查 H5 页面是否正常访问
3. 确认业务域名配置正确
