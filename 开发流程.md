# 开发流程说明

## 🚨 重要提醒

**永远不要直接在 `main` 分支开发！**

开发新功能前，先执行：
```bash
git checkout develop
```

确认当前在 develop 分支（终端会显示分支名）。

---

## 📋 分支说明

| 分支 | 用途 | 说明 |
|------|------|------|
| `main` | 生产环境 | 用户访问的稳定版本，Vercel 自动部署 |
| `develop` | 开发环境 | 日常开发、测试新功能，不影响线上 |
| `production` | 备份分支 | 保留稳定版本的备份 |

---

## 🔄 日常开发流程

### 1️⃣ 开始开发新功能

```bash
# 切换到开发分支
git checkout develop

# 确认当前分支（应该显示 * develop）
git branch

# 拉取最新代码
git pull
```

### 2️⃣ 开发过程中

```bash
# 随意修改代码、添加新功能
# ... 编辑文件 ...

# 查看修改了哪些文件
git status

# 提交到开发分支
git add .
git commit -m "feat: 添加xxx功能"
git push
```

**注意：** 这些改动只在 develop 分支，不会影响线上用户！

### 3️⃣ 本地测试

```bash
# 在 develop 分支启动本地开发服务器
npm run dev

# 访问 http://localhost:5173 测试新功能
```

---

## 🚀 发布新版本到线上

**只有当新功能测试完全没问题后，才执行以下步骤：**

```bash
# 1. 切换到主分支
git checkout main

# 2. 拉取最新代码
git pull

# 3. 合并开发分支的改动
git merge develop

# 4. 推送到 GitHub（Vercel 会自动部署到线上）
git push

# 5. 打版本标签（可选但推荐）
git tag -a v1.1.0 -m "版本 1.1.0 - 新功能描述"
git push origin v1.1.0

# 6. 切回开发分支继续工作
git checkout develop
```

**发布后：**
- 等待 1-2 分钟，Vercel 自动部署完成
- 访问 https://zen-timer-rho.vercel.app 查看更新

---

## 🆘 常见问题

### Q: 我不确定当前在哪个分支？
```bash
git branch
# 有 * 号的就是当前分支
```

### Q: 我不小心在 main 分支改了代码怎么办？
```bash
# 如果还没提交，先暂存改动
git stash

# 切换到 develop 分支
git checkout develop

# 恢复改动
git stash pop

# 然后正常提交
git add .
git commit -m "feat: xxx"
git push
```

### Q: 线上出 bug 了，需要紧急修复？
```bash
# 1. 在 main 分支直接修复
git checkout main
# ... 修复 bug ...
git add .
git commit -m "fix: 修复xxx问题"
git push

# 2. 同步修复到开发分支
git checkout develop
git merge main
git push

# 3. 切回开发分支
git checkout develop
```

### Q: 想回退到之前的稳定版本？
```bash
# 查看所有版本标签
git tag

# 回退到指定版本（比如 v1.0.0）
git checkout main
git reset --hard v1.0.0
git push --force

# ⚠️ 慎用 --force，会覆盖线上代码
```

---

## ✅ 检查清单

**每次开始开发前：**
- [ ] 确认在 `develop` 分支：`git branch`
- [ ] 拉取最新代码：`git pull`

**发布到线上前：**
- [ ] 本地测试通过
- [ ] 确认所有改动都已提交
- [ ] 切换到 `main` 分支
- [ ] 合并 `develop` 分支
- [ ] 推送到 GitHub

---

## 🌐 网站地址

**线上地址：** https://zen-timer-rho.vercel.app

**本地开发：** http://localhost:5173

---

## 📝 版本记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0.0 | 2026-01-31 | 初始稳定版本 |

---

**记住：开发新功能时，第一步永远是 `git checkout develop`！**
